# event loop（事件循环）  

javascript的并发模型基于事件循环。

## 运行时
### 可视化描述  
![运行时](/img/default.svg)

### 栈  
函数调用形成了一个栈帧。

### 堆  
对象被分配在一个堆中，即用以表示一大块非结构化的内存区域。

### 队列  
一个javascript运行时包含了一个待处理的消息队列。每一个消息都关联着一个用以处理这个消息的函数。

在事件循环期间的某个时刻，运行时从最先进入队列的消息开始处理队列中的消息。为此，这个消息会被移除队列，并作为输入参数调用与之关联的函数。调用一个函数总是会为其创造一个新的栈帧。  
函数的处理会一直进行到执行站再次为空为止；然后事件循环将会处理队列中的下一个消息。  
## 事件循环
### 执行至完成  
每一个消息完整的执行后，其它消息才会被执行。  
### 添加消息  
在浏览器里，当一个事件发生且有一个事件监听器绑定在该事件时，消息会被随时添加进队列。  
setTimeout的延迟参数代表了消息被加入到队列的最小延迟时间。